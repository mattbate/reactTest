import configureMockStore from 'redux-mock-store';
import thunk from 'redux-thunk';
import {fetchOrdersIfNeeded, fetchOrderDetails, RECEIVE_ORDERS, REQUEST_ORDERS} from './ordersv2Actions';
import fetchMock from 'fetch-mock';


const middlewares = [thunk]
const mockStore = configureMockStore(middlewares);

const singleOrderResponse = {"responseStatus":"OK","responseMessage":null,"timestamp":"2018-04-26T09:47:13+0100","OutgoingOrders":{"Order":[{"OrderType":"Order","OrderSource":"Manual","ESPOrderNo":1000,"InvoiceNumber":null,"ExternalReference":null,"Date":"2016-12-15T10:46:18+0000","CustomerCompany":"","CustomerName":"","CustomerAddress1":"","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"","CustomerCounty":"","CustomerPostcode":"","CustomerCountry":"UK","CustomerEmail":"","CustomerTelephone":"","CustomerFax":null,"CustomerReference":null,"CustomerNotes":null,"DeliveryCompany":"","DeliveryName":"","DeliveryAddress1":"","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"","DeliveryCounty":"","DeliveryPostcode":"","DeliveryCountry":"UK","DeliveryTelephone":"","ShippingMethod":null,"ShippingCost":0.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":0.0,"PaymentComplete":true,"Payments":null,"CurrencyCode":"GBP","SellerUsername":null,"CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"0","StockNumber":"","ItemNumber":"0","ProductTitle":"","Quantity":0,"UnitCost":0.0,"TaxRate":20.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":0}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"Delivered","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"}]},"PaginationResult":{"TotalNumberOfPages":1,"TotalNumberOfEntries":1}};
const singleExpectedResponse = [{"filter": {"id": 1000}, "type": "REQUEST_ORDERS"}, {"filter": {"id": 1000}, "json": {"OutgoingOrders": {"Order": [{"BuyerId": "", "CourierName": null, "CourierProfileName": null, "CourierService": null, "CourierServiceCode": null, "CurrencyCode": "GBP", "CustomerAddress1": "", "CustomerAddress2": "", "CustomerAddress3": null, "CustomerCity": "", "CustomerCompany": "", "CustomerCountry": "UK", "CustomerCounty": "", "CustomerEmail": "", "CustomerFax": null, "CustomerName": "", "CustomerNotes": null, "CustomerPostcode": "", "CustomerReference": null, "CustomerTelephone": "", "Date": "2016-12-15T10:46:18+0000", "DeliveryAddress1": "", "DeliveryAddress2": "", "DeliveryAddress3": null, "DeliveryCity": "", "DeliveryCompany": "", "DeliveryCountry": "UK", "DeliveryCounty": "", "DeliveryName": "", "DeliveryPostcode": "", "DeliveryTelephone": "", "Discount": 0, "ESPOrderNo": 1000, "ExternalReference": null, "Flag1": null, "Flag2": null, "FulfilmentType": "MERCHANT", "Insurance": 0, "InvoiceNumber": null, "OrderCredits": null, "OrderItems": {"Item": [{"CreditReason": null, "CustomMessage1": null, "CustomMessage2": null, "CustomMessage3": null, "ItemNumber": "0", "LocationId": 0, "ProductFolderName": null, "ProductTitle": "", "Quantity": 0, "StockNumber": "", "TaxCode": null, "TaxRate": 20, "UnitCost": 0, "UnitCostIncludesTax": "Y", "WebProductID": "0", "Weight": 0}]}, "OrderSource": "Manual", "OrderStatus": "Delivered", "OrderTotal": 0, "OrderType": "Order", "PaymentComplete": true, "Payments": null, "SellerUsername": null, "ShipToStore": null, "ShippingCost": 0, "ShippingMethod": null, "StoreId": null, "VoucherCode": null}]}, "PaginationResult": {"TotalNumberOfEntries": 1, "TotalNumberOfPages": 1}}, "type": "RECEIVE_ORDERS"}];

const orderListResponse = {"responseStatus":"OK","responseMessage":null,"timestamp":"2018-04-26T11:19:01+0100","OutgoingOrders":{"Order":[{"OrderType":"Order","OrderSource":"Manual","ESPOrderNo":1000,"InvoiceNumber":null,"ExternalReference":null,"Date":"2016-12-15T10:46:18+0000","CustomerCompany":"","CustomerName":"","CustomerAddress1":"","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"","CustomerCounty":"","CustomerPostcode":"","CustomerCountry":"UK","CustomerEmail":"","CustomerTelephone":"","CustomerFax":null,"CustomerReference":null,"CustomerNotes":null,"DeliveryCompany":"","DeliveryName":"","DeliveryAddress1":"","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"","DeliveryCounty":"","DeliveryPostcode":"","DeliveryCountry":"UK","DeliveryTelephone":"","ShippingMethod":null,"ShippingCost":0.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":0.0,"PaymentComplete":true,"Payments":null,"CurrencyCode":"GBP","SellerUsername":null,"CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"0","StockNumber":"","ItemNumber":"0","ProductTitle":"","Quantity":0,"UnitCost":0.0,"TaxRate":20.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":0}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"Delivered","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"WWW","ESPOrderNo":1001,"InvoiceNumber":"41220","ExternalReference":"100000136","Date":"2016-12-16T11:20:11+0000","CustomerCompany":"","CustomerName":"Simeone Zaza","CustomerAddress1":"53343 Turin Road","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"Atlanta","CustomerCounty":"Georgia","CustomerPostcode":"32423","CustomerCountry":"US","CustomerEmail":"1481275517@example.com","CustomerTelephone":"32342432","CustomerFax":null,"CustomerReference":null,"CustomerNotes":"0","DeliveryCompany":"","DeliveryName":"Simeone Zaza","DeliveryAddress1":"53343 Turin Road","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"Atlanta","DeliveryCounty":"Georgia","DeliveryPostcode":"32423","DeliveryCountry":"US","DeliveryTelephone":"32342432","ShippingMethod":"flatrate_flatrate","ShippingCost":5.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":105.0,"PaymentComplete":true,"Payments":{"Payment":[{"PaymentMethod":"Credit Card","PaymentReference":"cashondelivery ","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":105.0,"PaymentDate":"2016-12-16T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"Magento Test Site","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"22","StockNumber":"AZ11","ItemNumber":"176","ProductTitle":"Kawasaki H2R 800cc","Quantity":1,"UnitCost":100.0,"TaxRate":40.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":4}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"Delivered","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"Manual","ESPOrderNo":1002,"InvoiceNumber":"41221","ExternalReference":"","Date":"2016-12-16T13:41:22+0000","CustomerCompany":"","CustomerName":"example","CustomerAddress1":"example","CustomerAddress2":"example","CustomerAddress3":null,"CustomerCity":"example","CustomerCounty":"example","CustomerPostcode":"BS11 1NS","CustomerCountry":"UK","CustomerEmail":"example@example.com","CustomerTelephone":"","CustomerFax":null,"CustomerReference":null,"CustomerNotes":null,"DeliveryCompany":"","DeliveryName":"example","DeliveryAddress1":"example","DeliveryAddress2":"example","DeliveryAddress3":null,"DeliveryCity":"example","DeliveryCounty":"example","DeliveryPostcode":"BS11 1NS","DeliveryCountry":"UK","DeliveryTelephone":"","ShippingMethod":null,"ShippingCost":0.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":0.0,"PaymentComplete":true,"Payments":{"Payment":[{"PaymentMethod":"Cash","PaymentReference":"1002","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":10.0,"PaymentDate":"2016-12-16T00:00:00+0000"},{"PaymentMethod":"Cash","PaymentReference":"1002 Refund","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":-10.0,"PaymentDate":"2016-12-16T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"testuser_esptestus1","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"12","StockNumber":"AZ04","ItemNumber":"0","ProductTitle":"Husqvarna Nuda 900rr - Test","Quantity":1,"UnitCost":10.0,"TaxRate":20.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":4}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"Cancelled","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"WWW","ESPOrderNo":1003,"InvoiceNumber":"41222","ExternalReference":"100000137","Date":"2016-12-19T13:29:18+0000","CustomerCompany":"","CustomerName":"Simeone Zaza","CustomerAddress1":"53343 Turin Road","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"Atlanta","CustomerCounty":"","CustomerPostcode":"32423","CustomerCountry":"GB","CustomerEmail":"1481275517@example.com","CustomerTelephone":"32342432","CustomerFax":null,"CustomerReference":null,"CustomerNotes":"0","DeliveryCompany":"","DeliveryName":"Simeone Zaza","DeliveryAddress1":"53343 Turin Road","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"Atlanta","DeliveryCounty":"","DeliveryPostcode":"32423","DeliveryCountry":"GB","DeliveryTelephone":"32342432","ShippingMethod":"flatrate_flatrate","ShippingCost":5.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":0.0,"PaymentComplete":false,"Payments":{"Payment":[{"PaymentMethod":"Credit Card","PaymentReference":"cashondelivery ","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":40.0,"PaymentDate":"2016-12-19T00:00:00+0000"},{"PaymentMethod":"Credit Card","PaymentReference":null,"PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":-40.0,"PaymentDate":"2016-12-19T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"Magento Test Site","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"19","StockNumber":"AZ08","ItemNumber":"177","ProductTitle":"Honda MSX 125","Quantity":1,"UnitCost":35.0,"TaxRate":20.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":3}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"Cancelled","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"WWW","ESPOrderNo":1004,"InvoiceNumber":"41223","ExternalReference":"100000138","Date":"2016-12-19T14:28:33+0000","CustomerCompany":"","CustomerName":"Simeone Zaza","CustomerAddress1":"53343 Turin Road","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"Atlanta","CustomerCounty":"Georgia","CustomerPostcode":"32423","CustomerCountry":"US","CustomerEmail":"1481275517@example.com","CustomerTelephone":"32342432","CustomerFax":null,"CustomerReference":null,"CustomerNotes":"23-Apr-2018 12:14:57: aasa\n23-Apr-2018 12:14:24: asaaaa\n23-Apr-2018 12:06:58: aac\n23-Apr-2018 12:05:58: asaaaa\n23-Apr-2018 11:57:36: sddsd\n0","DeliveryCompany":"","DeliveryName":"Simeone Zaza","DeliveryAddress1":"53343 Turin Road","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"Atlanta","DeliveryCounty":"Georgia","DeliveryPostcode":"32423","DeliveryCountry":"US","DeliveryTelephone":"32342432","ShippingMethod":"flatrate_flatrate","ShippingCost":5.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":40.0,"PaymentComplete":true,"Payments":{"Payment":[{"PaymentMethod":"Credit Card","PaymentReference":"cashondelivery ","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":40.0,"PaymentDate":"2016-12-19T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"Magento Test Site","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"19","StockNumber":"AZ08","ItemNumber":"178","ProductTitle":"Honda MSX 125","Quantity":1,"UnitCost":35.0,"TaxRate":40.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":4}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"On Hold","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"WWW","ESPOrderNo":1005,"InvoiceNumber":"41224","ExternalReference":"100000139","Date":"2016-12-19T14:32:31+0000","CustomerCompany":"","CustomerName":"Simeone Zaza","CustomerAddress1":"53343 Turin Road","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"Atlanta","CustomerCounty":"Baden-Württemberg","CustomerPostcode":"32423","CustomerCountry":"DE","CustomerEmail":"1481275517@example.com","CustomerTelephone":"32342432","CustomerFax":null,"CustomerReference":null,"CustomerNotes":"23-Apr-2018 13:55:02: asd\n0","DeliveryCompany":"","DeliveryName":"Simeone Zaza","DeliveryAddress1":"53343 Turin Road","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"Atlanta","DeliveryCounty":"Baden-Württemberg","DeliveryPostcode":"32423","DeliveryCountry":"DE","DeliveryTelephone":"32342432","ShippingMethod":"flatrate_flatrate","ShippingCost":5.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":40.0,"PaymentComplete":true,"Payments":{"Payment":[{"PaymentMethod":"Credit Card","PaymentReference":"cashondelivery ","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":40.0,"PaymentDate":"2016-12-19T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"Magento Test Site","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"19","StockNumber":"AZ08","ItemNumber":"179","ProductTitle":"Honda MSX 125","Quantity":1,"UnitCost":35.0,"TaxRate":50.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":3}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"On Hold","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"WWW","ESPOrderNo":1006,"InvoiceNumber":"41225","ExternalReference":"100000140","Date":"2016-12-19T14:35:46+0000","CustomerCompany":"","CustomerName":"Simeone Zaza","CustomerAddress1":"53343 Turin Road","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"Atlanta","CustomerCounty":"Georgia","CustomerPostcode":"32423","CustomerCountry":"US","CustomerEmail":"1481275517@example.com","CustomerTelephone":"32342432","CustomerFax":null,"CustomerReference":null,"CustomerNotes":"23-Apr-2018 12:41:04: sds\n23-Apr-2018 12:37:31: asasa\n23-Apr-2018 12:37:21: asasa\n0","DeliveryCompany":"","DeliveryName":"Simeone Zaza","DeliveryAddress1":"53343 Turin Road","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"Atlanta","DeliveryCounty":"Georgia","DeliveryPostcode":"32423","DeliveryCountry":"US","DeliveryTelephone":"32342432","ShippingMethod":"flatrate_flatrate","ShippingCost":5.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":40.0,"PaymentComplete":true,"Payments":{"Payment":[{"PaymentMethod":"Credit Card","PaymentReference":"cashondelivery ","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":40.0,"PaymentDate":"2016-12-19T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"Magento Test Site","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"19","StockNumber":"AZ08","ItemNumber":"180","ProductTitle":"Honda MSX 125","Quantity":1,"UnitCost":35.0,"TaxRate":40.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":4}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"On Hold","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"WWW","ESPOrderNo":1007,"InvoiceNumber":"41226","ExternalReference":"100000141","Date":"2016-12-19T14:41:45+0000","CustomerCompany":"","CustomerName":"Simeone Zaza","CustomerAddress1":"53343 Turin Road","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"Atlanta","CustomerCounty":"Georgia","CustomerPostcode":"32423","CustomerCountry":"US","CustomerEmail":"1481275517@example.com","CustomerTelephone":"32342432","CustomerFax":null,"CustomerReference":null,"CustomerNotes":"0","DeliveryCompany":"","DeliveryName":"Simeone Zaza","DeliveryAddress1":"53343 Turin Road","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"Atlanta","DeliveryCounty":"Georgia","DeliveryPostcode":"32423","DeliveryCountry":"US","DeliveryTelephone":"32342432","ShippingMethod":"flatrate_flatrate","ShippingCost":5.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":40.0,"PaymentComplete":true,"Payments":{"Payment":[{"PaymentMethod":"Credit Card","PaymentReference":"cashondelivery ","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":40.0,"PaymentDate":"2016-12-19T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"Magento Test Site","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"19","StockNumber":"AZ08","ItemNumber":"181","ProductTitle":"Honda MSX 125","Quantity":1,"UnitCost":35.0,"TaxRate":40.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":3}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"Delivered","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"WWW","ESPOrderNo":1008,"InvoiceNumber":"41227","ExternalReference":"100000142","Date":"2016-12-19T14:50:05+0000","CustomerCompany":"","CustomerName":"Simeone Zaza","CustomerAddress1":"53343 Turin Road","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"Atlanta","CustomerCounty":"","CustomerPostcode":"32423","CustomerCountry":"GB","CustomerEmail":"1481275517@example.com","CustomerTelephone":"32342432","CustomerFax":null,"CustomerReference":null,"CustomerNotes":"0","DeliveryCompany":"","DeliveryName":"Simeone Zaza","DeliveryAddress1":"53343 Turin Road","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"Atlanta","DeliveryCounty":"","DeliveryPostcode":"32423","DeliveryCountry":"GB","DeliveryTelephone":"32342432","ShippingMethod":"flatrate_flatrate","ShippingCost":60.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":540.0,"PaymentComplete":true,"Payments":{"Payment":[{"PaymentMethod":"Cash","PaymentReference":"","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":540.0,"PaymentDate":"2016-12-19T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"Magento Test Site","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"114","StockNumber":"AZ07#sku","ItemNumber":"182","ProductTitle":"Lexmoto ZSXF 125","Quantity":12,"UnitCost":40.0,"TaxRate":20.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":0}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"Delivered","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"},{"OrderType":"Order","OrderSource":"WWW","ESPOrderNo":1009,"InvoiceNumber":"41228","ExternalReference":"100000143","Date":"2016-12-19T14:58:30+0000","CustomerCompany":"","CustomerName":"Simeone Zaza","CustomerAddress1":"53343 Turin Road","CustomerAddress2":"","CustomerAddress3":null,"CustomerCity":"Atlanta","CustomerCounty":"","CustomerPostcode":"32423","CustomerCountry":"GB","CustomerEmail":"1481275517@example.com","CustomerTelephone":"32342432","CustomerFax":null,"CustomerReference":null,"CustomerNotes":"0","DeliveryCompany":"","DeliveryName":"Simeone Zaza","DeliveryAddress1":"53343 Turin Road","DeliveryAddress2":"","DeliveryAddress3":null,"DeliveryCity":"Atlanta","DeliveryCounty":"","DeliveryPostcode":"32423","DeliveryCountry":"GB","DeliveryTelephone":"32342432","ShippingMethod":"flatrate_flatrate","ShippingCost":5.0,"Insurance":0.0,"Discount":0.0,"VoucherCode":null,"OrderTotal":45.0,"PaymentComplete":true,"Payments":{"Payment":[{"PaymentMethod":"Credit Card","PaymentReference":"cashondelivery ","PaymentNotes":null,"PaymentCCDetails":null,"PaymentGateway":null,"PayPalEmail":null,"PayPalTransactionID":null,"PayPalProtectionEligibility":false,"Amount":45.0,"PaymentDate":"2016-12-19T00:00:00+0000"}]},"CurrencyCode":"GBP","SellerUsername":"Magento Test Site","CourierProfileName":null,"OrderItems":{"Item":[{"WebProductID":"114","StockNumber":"AZ07#sku","ItemNumber":"183","ProductTitle":"Lexmoto ZSXF 125","Quantity":1,"UnitCost":40.0,"TaxRate":20.0,"TaxCode":null,"UnitCostIncludesTax":"Y","Weight":0,"ProductFolderName":null,"CreditReason":null,"CustomMessage1":null,"CustomMessage2":null,"CustomMessage3":null,"LocationId":3}]},"BuyerId":"","StoreId":null,"ShipToStore":null,"OrderCredits":null,"OrderStatus":"Delivered","Flag1":null,"Flag2":null,"CourierName":null,"CourierService":null,"CourierServiceCode":null,"FulfilmentType":"MERCHANT"}]},"PaginationResult":{"TotalNumberOfPages":339,"TotalNumberOfEntries":3382}}
const orderListExpectedResponse = [{"filter": {"pageNumber": 1, "paidFor": false}, "type": "REQUEST_ORDERS"}, {"filter": {"pageNumber": 1, "paidFor": false}, "json": {"OutgoingOrders": {"Order": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]]}, "PaginationResult": {"TotalNumberOfEntries": 3382, "TotalNumberOfPages": 339}}, "type": "RECEIVE_ORDERS"}];

describe('async actions', () => {
    afterEach(() => {
        fetchMock.reset()
        fetchMock.restore()
    });

  it('it fetches a single order when an id is passed through', () => {
      fetchMock
          .getOnce('/eSellerProAPI/services/api/rs/v2/orders?ESPOrderNo=1000&',
              { body: singleOrderResponse, headers: { 'content-type': 'application/json' } });
      const expectedActions = singleExpectedResponse;
      const store = mockStore({    ordersFilterReducer: {
              "paidFor": false,
              "pageNumber": 1
          },
          ordersByFilter: {
              isFetching: false}});

      return store.dispatch(fetchOrderDetails(1000)).then(() => {
        // return of async actions
        expect(store.getActions()).toEqual(expectedActions)
    })
  });
    it('it fetches a list of orders', () => {
        fetchMock
            .getOnce('eSellerProAPI/services/api/rs/v2/orders?EntriesPerPage=10&PaidOnly=false&PageNumber=1&',
                { body: orderListResponse, headers: { 'content-type': 'application/json' } });
        const storeInitialState = {
            ordersFilterReducer: {
                "paidFor": false,
                "pageNumber": 1
            },
            ordersByFilter: {
                isFetching: false
            }
        };
        const expectedActions = orderListExpectedResponse;
        const store = mockStore(storeInitialState);

        return store.dispatch(fetchOrdersIfNeeded(storeInitialState.ordersFilterReducer))
            .then(() => {
                // return of async actions
                expect(store.getActions()).toEqual(expectedActions)
            });
    });
});